import{u as P,b as y,c as I,r as c,j as e,a as w,A as S}from"./index-BJNj8_gr.js";const F=[{label:"Mumbai",value:"Mumbai"},{label:"Delhi",value:"Delhi"},{label:"Bangalore",value:"Bangalore"},{label:"Hyderabad",value:"Hyderabad"},{label:"Ahmedabad",value:"Ahmedabad"},{label:"Chennai",value:"Chennai"},{label:"Kolkata",value:"Kolkata"},{label:"Surat",value:"Surat"},{label:"Pune",value:"Pune"},{label:"Jaipur",value:"Jaipur"},{label:"Lucknow",value:"Lucknow"},{label:"Kanpur",value:"Kanpur"},{label:"Nagpur",value:"Nagpur"},{label:"Indore",value:"Indore"},{label:"Thane",value:"Thane"},{label:"Bhopal",value:"Bhopal"},{label:"Visakhapatnam",value:"Visakhapatnam"},{label:"Pimpri-Chinchwad",value:"Pimpri-Chinchwad"},{label:"Patna",value:"Patna"},{label:"Vadodara",value:"Vadodara"},{label:"Ghaziabad",value:"Ghaziabad"},{label:"Ludhiana",value:"Ludhiana"},{label:"Agra",value:"Agra"},{label:"Nashik",value:"Nashik"},{label:"Faridabad",value:"Faridabad"}],A=()=>{const n=P(),N=y(),{loginSeller:v}=I(),{mobileNumber:d,message:p}=N.state||{};c.useEffect(()=>{d||n("/seller/login")},[d,n]);const[a,f]=c.useState({companyName:"",address:"",city:"",yearsInBusiness:"",pinCode:"",email:"",website:"",gstNumber:"",contactPerson:"",contactNumber:"",brandOfProfileUsed:"",gstCertificate:null,visitingCard:null,businessProfileVideo:null}),[h,g]=c.useState(!1),[u,b]=c.useState({});if(!d)return null;const i=(s,r)=>{f(l=>({...l,[s]:r}))},m=(s,r)=>{const l=r.target.files[0];l&&f(t=>({...t,[s]:l}))},x=()=>{const s=["companyName","address","city","yearsInBusiness","pinCode","email","gstNumber","contactPerson","contactNumber","brandOfProfileUsed"];for(const r of s)if(!a[r])return`Please fill ${r.replace(/([A-Z])/g," $1").toLowerCase()}`;return a.gstCertificate?a.contactNumber.length!==10?"Please enter a valid 10-digit phone number":/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a.email)?/^[0-9]{6}$/.test(a.pinCode)?null:"Invalid 6-digit PIN code":"Invalid email address":"GST Certificate upload is mandatory"},j=async s=>{s.preventDefault();const r=x();if(r){alert(r);return}g(!0);try{const l=new FormData;l.append("phoneNumber",d),l.append("companyName",a.companyName),l.append("address",a.address),l.append("city",a.city),l.append("yearsInBusiness",a.yearsInBusiness),l.append("pinCode",a.pinCode),l.append("email",a.email),l.append("website",a.website||""),l.append("gstNumber",a.gstNumber),l.append("contactPerson",a.contactPerson),l.append("contactNumber",a.contactNumber),l.append("brandOfProfileUsed",a.brandOfProfileUsed),a.gstCertificate&&l.append("gstCertificate",a.gstCertificate),a.visitingCard&&l.append("visitingCard",a.visitingCard),a.businessProfileVideo&&l.append("businessProfileVideo",a.businessProfileVideo);const t=await w.post(`${S}/api/sellers/register`,l,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:o=>{const C=Math.round(o.loaded*100/o.total);b({overall:C})}});if(t.data.success){v(t.data.token);const o=t.data.seller?.status||"pending";n(o==="pending"?"/seller/pending-approval":o==="approved"?"/seller/dashboard":"/seller/pending-approval")}else alert(t.data.message||"Registration failed")}catch(l){console.error("Registration error:",l);const t=l.response?.data?.message||"Failed to register. Please try again.";alert(t)}finally{g(!1),b({})}};return e.jsx("div",{className:"welcome-profile-setup-container",children:e.jsxs("div",{className:"welcome-profile-setup-content",children:[e.jsxs("div",{className:"welcome-profile-setup-header",children:[e.jsx("img",{src:"/logo.png",alt:"Logo",className:"welcome-logo"}),e.jsx("h1",{className:"welcome-title",children:"Welcome Profile Setup"}),p&&e.jsx("p",{className:"welcome-message",children:p})]}),e.jsxs("form",{onSubmit:j,className:"welcome-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{className:"section-title",children:"BUSINESS INFORMATION"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Company Name*"}),e.jsx("input",{type:"text",className:"form-input",value:a.companyName,onChange:s=>i("companyName",s.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Address*"}),e.jsx("textarea",{className:"form-textarea",value:a.address,onChange:s=>i("address",s.target.value),rows:4,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"City*"}),e.jsxs("select",{className:"form-select",value:a.city,onChange:s=>i("city",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select your city..."}),F.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"PIN Code*"}),e.jsx("input",{type:"text",className:"form-input",value:a.pinCode,onChange:s=>{const r=s.target.value.replace(/\D/g,"").slice(0,6);i("pinCode",r)},placeholder:"6-digit",maxLength:6,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Years in Business*"}),e.jsx("input",{type:"number",className:"form-input",value:a.yearsInBusiness,onChange:s=>i("yearsInBusiness",s.target.value),min:"0",required:!0})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{className:"section-title",children:"CONTACT INFORMATION"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email*"}),e.jsx("input",{type:"email",className:"form-input",value:a.email,onChange:s=>i("email",s.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Website"}),e.jsx("input",{type:"url",className:"form-input",value:a.website,onChange:s=>i("website",s.target.value),placeholder:"https://example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"GST Number*"}),e.jsx("input",{type:"text",className:"form-input",value:a.gstNumber,onChange:s=>{const r=s.target.value.replace(/[^a-zA-Z0-9]/g,"").slice(0,15);i("gstNumber",r)},maxLength:15,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Contact Person*"}),e.jsx("input",{type:"text",className:"form-input",value:a.contactPerson,onChange:s=>i("contactPerson",s.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Contact Number*"}),e.jsx("input",{type:"tel",className:"form-input",value:a.contactNumber,onChange:s=>{const r=s.target.value.replace(/\D/g,"").slice(0,10);i("contactNumber",r)},placeholder:"10-digit",maxLength:10,required:!0})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{className:"section-title",children:"DOCUMENTS"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"GST Certificate*"}),e.jsxs("div",{className:"file-upload-wrapper",children:[e.jsx("input",{type:"file",id:"gstCertificate",accept:".pdf,.jpg,.jpeg,.png",onChange:s=>m("gstCertificate",s),className:"file-input",required:!0}),e.jsx("label",{htmlFor:"gstCertificate",className:"file-upload-label",children:a.gstCertificate?a.gstCertificate.name:"Choose File (PDF/Image)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Visiting Card"}),e.jsxs("div",{className:"file-upload-wrapper",children:[e.jsx("input",{type:"file",id:"visitingCard",accept:".jpg,.jpeg,.png",onChange:s=>m("visitingCard",s),className:"file-input"}),e.jsx("label",{htmlFor:"visitingCard",className:"file-upload-label",children:a.visitingCard?a.visitingCard.name:"Choose File (Image)"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{className:"section-title",children:"BUSINESS PROFILE VIDEO"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Business Profile Video"}),e.jsxs("div",{className:"file-upload-wrapper",children:[e.jsx("input",{type:"file",id:"businessProfileVideo",accept:"video/*",onChange:s=>m("businessProfileVideo",s),className:"file-input"}),e.jsx("label",{htmlFor:"businessProfileVideo",className:"file-upload-label",children:a.businessProfileVideo?a.businessProfileVideo.name:"Choose Video File"})]}),!a.businessProfileVideo&&e.jsx("p",{className:"video-hint",children:"Upload a 60-second video to get lead priority!"})]})]}),e.jsx("div",{className:"form-section",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Brand of Profile Used*"}),e.jsxs("select",{className:"form-select",value:a.brandOfProfileUsed,onChange:s=>i("brandOfProfileUsed",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select a brand..."}),e.jsx("option",{value:"fenesta",children:"Fenesta"}),e.jsx("option",{value:"aparna",children:"Aparna Venster"}),e.jsx("option",{value:"lg",children:"LG Hausys"})]})]})}),e.jsxs("div",{className:"form-actions",children:[u.overall&&e.jsxs("div",{className:"upload-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${u.overall}%`}})}),e.jsxs("p",{className:"progress-text",children:["Uploading... ",u.overall,"%"]})]}),e.jsx("button",{type:"submit",className:"submit-button",disabled:h,children:h?"PROCESSING...":"COMPLETE REGISTRATION"})]})]})]})})};export{A as default};
