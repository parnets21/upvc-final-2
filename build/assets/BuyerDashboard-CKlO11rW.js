import{r as o,u as b,a as S,d as h,j as e,e as n,c as w}from"./index-BfVn0bv8.js";import{M as k}from"./index-ZbhGUdBh.js";import{B as L}from"./BuyerBottomNav-DUBZW9g0.js";import{T as E}from"./TopTabBar-DKljzDFO.js";import{R as M}from"./index-DwT0bbK6.js";/* empty css                       */const I=()=>{const[r,f]=o.useState(!0),[a,i]=o.useState(null),[c,p]=o.useState(null),[d,m]=o.useState(!1),l=o.useRef(null),x=b(),u=o.useRef(!1);o.useEffect(()=>{u.current||(u.current=!0,t())},[]);const t=async()=>{try{const s=await S.get(h("api/homepage"));s.data.success?i(s.data.data):i(null)}catch(s){s.response?.status!==404&&console.error("Error fetching homepage data:",s),i(null),m(!0)}finally{f(!1)}},N=s=>{if(l.current){const[g,j]=s.split(".").map(Number),y=g*60+j;l.current.seekTo(y),p(s)}},v=s=>{const[g,j]=s.split(".");return`${g.padStart(2,"0")}:${j.padStart(2,"0")}`};return r?e.jsx("div",{className:"homepage-loading",children:e.jsx("div",{className:"spinner"})}):a?e.jsxs("div",{className:"homepage-container",children:[e.jsxs("div",{className:"homepage-description",children:[e.jsx(n,{weight:"Inter",className:"description-title",children:a.title}),e.jsx(n,{weight:"Inter",className:"description-text",children:a.subtitle})]}),a?.sponsorLogo&&e.jsx("div",{className:"homepage-sponsor",children:e.jsxs("div",{className:"sponsor-content",children:[e.jsx("img",{src:h(a.sponsorLogo),alt:"Sponsor",className:"sponsor-logo"}),a.sponsorText&&e.jsxs(n,{weight:"Inter",className:"sponsor-text",children:["SPONSORED BY ",a.sponsorText.toUpperCase()]})]})}),e.jsx("div",{className:"homepage-video-container",children:!d&&a.videoUrl?e.jsx(M,{ref:l,url:h(a.videoUrl),controls:!0,playing:!1,width:"100%",height:"100%",onError:()=>m(!0)}):e.jsx("div",{className:"video-fallback",children:e.jsx("p",{children:"Video unavailable"})})}),a?.keyMoments&&a?.keyMoments?.length>0&&e.jsxs("div",{className:"homepage-carousel",children:[e.jsx(n,{weight:"Inter",className:"carousel-title",children:"KEY VIDEO MOMENTS"}),e.jsx("div",{className:"carousel-list",children:a.keyMoments.map(s=>e.jsx("div",{className:`carousel-item ${c===s.timestamp?"active":""}`,onClick:()=>N(s.timestamp),children:e.jsxs("div",{className:"carousel-content",children:[e.jsx("img",{src:h(s.thumbnail),alt:s.title,className:"carousel-thumbnail"}),e.jsxs("div",{className:"carousel-text-container",children:[e.jsx(n,{weight:"Inter",className:"carousel-text",children:s.title}),e.jsx(n,{weight:"Inter",className:"carousel-timestamp",children:v(s.timestamp)})]}),e.jsx("div",{className:"carousel-play-icon",children:e.jsx("span",{className:"play-icon",children:(c===s.timestamp,"â–¶")})})]})},s._id))})]}),e.jsx("div",{className:"homepage-buy-now",children:e.jsx("button",{className:"buy-now-button",onClick:()=>x("/buyer/buy-now"),children:e.jsx(n,{weight:"Inter",className:"buy-now-text",children:"BUY NOW"})})})]}):e.jsx("div",{className:"homepage-error",children:e.jsx("p",{children:"Failed to load data"})})},A=()=>{const{buyerToken:r,logout:f}=w(),a=b(),[i,c]=o.useState(null),[p,d]=o.useState(!1);o.useEffect(()=>{const t=localStorage.getItem("userLocation");t?c(t):r&&d(!0)},[r]);const m=["Delhi","Mumbai","Bangalore","Hyderabad","Ahmedabad","Chennai","Kolkata","Surat","Pune","Jaipur","Lucknow","Kanpur","Nagpur","Indore","Bhopal","Patna","Vadodara","Ludhiana","Agra","Nashik","Faridabad","Meerut","Rajkot","Varanasi","Amritsar"],l=t=>{localStorage.setItem("userLocation",t),c(t),d(!1),alert(`${t} has been set as your location.`)},x=()=>{a("/buyer/notifications")},u=()=>r?e.jsxs("div",{className:"location-prompt-container",children:[e.jsx("h2",{className:"location-prompt-title",children:"Choose Your Location"}),e.jsx("div",{className:"location-cities-wrap",children:m.map((t,N)=>e.jsx("button",{className:"location-city-button",onClick:()=>l(t),children:t},N))}),e.jsx("button",{className:"location-search-button",onClick:()=>a("/buyer/location-selection"),children:"Search Location"})]}):null;return p&&!i?e.jsx(u,{}):e.jsxs("div",{className:"buyer-dashboard-container",children:[e.jsxs("div",{className:"buyer-dashboard-header",children:[e.jsx("div",{className:"header-spacer"}),e.jsx("img",{src:"/logo.png",alt:"Logo",className:"dashboard-logo"}),e.jsx("button",{className:"notification-button",onClick:x,"aria-label":"Notifications",children:e.jsx(k,{size:24,color:"#000"})})]}),e.jsx(E,{}),e.jsx("div",{className:"buyer-dashboard-content",children:e.jsx(I,{})}),e.jsx(L,{})]})};export{A as default};
